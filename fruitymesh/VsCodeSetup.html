<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Visual Studio Code Setup :: Fruitymesh</title>
  <link rel="canonical" href="http://mwaylabs.github.io/fruitymesh/fruitymesh/VsCodeSetup.html">
  <meta name="generator" content="Antora 2.1.1">
  <link rel="stylesheet" href="../_/css/site.css">
  <link rel="stylesheet" href="../_/css/footer.css">
</head>

<body class="article">
  <header class="header" role="banner">
<header class="header" role="banner">
  <div class="navbar-top">
    <a class="navbar-logo" id="fruitymesh-logo-padding" href="https://mwaylabs.github.io/fruitymesh/fruitymesh/index.html">
      <div class="navbar-item">
        <img src="../_/img/fruitymesh_logo.png" alt="Fruitymesh">
      </div>
    </a>
    <div class="navbar-item">
      <div id="search-wrapper" class="border-color-fruitymesh>
        <input id="search-input" type="text" placeholder="Search...">
      </div>
    </div>
  </div>
  <nav class="navbar-bottom fruitymesh-header-color">
    <a href="https://github.com/mwaylabs/fruitymesh">
      <div class="navbar-item">Fruitymesh on Github</div>
    </a>
  </nav>
</header>

</header>
  <div class="main-wrapper">
<div class="navigation-container" data-component="" data-version="master">
  <aside class="navigation" role="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <button class="navigation-toggle"></button>
  <nav class="nav-menu">
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
    <ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Quick-Start.html">Quick Start</a>
      </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="BasicUsage.html">Basic Usage</a>
      </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Concepts.html">Concepts</a>
      </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Features.html">Features</a>
      </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Specification.html">Specification</a>
      </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Developers</span>
    <ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Developers.html">Developer Overview</a>
      </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Class-Structure.html">Class Structure</a>
      </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Debugging.html">Debugging</a>
      </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ModuleDocumentationTemplate.html">Module Documentation Template</a>
      </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="BuildingWithCMake.html">Building with CMake</a>
      </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="VsCodeSetup.html">VsCode Setup</a>
      </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CppCheck.html">CppCheck Setup</a>
      </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Mesh</span>
    <ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Node.html">Node</a>
      </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Connections.html">Connections</a>
      </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Core Functionality</span>
    <ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="AdvertisingController.html">AdvertisingController</a>
      </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="BoardConfig.html">Board Configuration</a>
      </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="FruityHal.html">FruityHal</a>
      </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Logger.html">Logger</a>
      </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="RawData.html">RawData Protocol</a>
      </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="RecordStorage.html">Record Storage</a>
      </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ScanController.html">ScanController</a>
      </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="SensorsAndActuators.html">Sensors and Actuators</a>
      </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Terminal.html">Terminal</a>
      </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Modules</span>
    <ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Modules.html">Module Overview</a>
      </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="AdvertisingModule.html">AdvertisingModule</a>
      </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="DebugModule.html">DebugModule</a>
      </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="DfuModule.html">DfuModule</a>
      </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="EnrollmentModule.html">EnrollmentModule</a>
      </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="IoModule.html">IoModule</a>
      </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="MeshAccessModule.html">MeshAccessModule</a>
      </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ScanningModule.html">ScanningModule</a>
      </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="StatusReporterModule.html">StatusReportModule</a>
      </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Simulator</span>
    <ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CherrySim.html">CherrySim</a>
      </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Measurements</span>
    <ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Battery-Consumption.html">Battery Consumption</a>
      </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Throughput.html">Throughput</a>
      </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">The Fruitymesh Algorithm</span>
    <ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="The-FruityMesh-Algorithm.html">The Fruitymesh Algorithm Basics</a>
      </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="The-Algorithm-in-Detail.html">The Algorithm in Detail</a>
      </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Tutorials</span>
    <ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Tutorials.html">Tutorial Overview</a>
      </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Implementing-a-Custom-Module.html">Implementing a Custom Module</a>
      </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="FAQ.html">FAQ</a>
      </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="FAQ.html">FAQ</a>
      </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main" role="main">
<article class="doc"><a name="section-top"></a>
<h1>Visual Studio Code Setup</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This page includes some additional information for setting up Visual Studio Code. For the basic Setup, see the <a href="Quick-Start.html#VsCode" class="page">Quick Start</a> page.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configure_debugging"><a class="anchor" href="#_configure_debugging"></a>Configure Debugging</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you need debugging support, you will need to install the Cortex-Debug Extension from here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Cortex Debug: <a href="https://marketplace.visualstudio.com/items?itemName=marus25.cortex-debug" class="bare">https://marketplace.visualstudio.com/items?itemName=marus25.cortex-debug</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You should then create the file <code>&lt;fruitymesh&gt;/.vscode/launch.json</code> with the content below. This is the configuration for the Cortex-Debug Extension. Make sure to insert the correct paths for armToolchainPath and serverPath. Also, depending on the featureset you are debugging, you must change the executable path to the correct binary. The device should also be changed if debugging a different chipset. The SVD file is optionally used, if you want to see the registers of the chips peripherals. Make sure to point it to the correct chipset if you need it.</p>
</div>
<div class="listingblock">
<div class="title">launch.json</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-C++ hljs" data-lang="C++">{
    "version": "0.2.0",
    "configurations": [
        {
            "type": "cortex-debug",
            "name": "Debug FruityMesh",
            "cwd": "${workspaceRoot}",
            "servertype": "jlink",
            "request": "launch",
            "demangle": true,

            "device": "NRF52832_XXAA",
            "executable": "./_build/vscode/github_nrf52.out", //Path to the built FruityMesh firmware
            "armToolchainPath": "C:/&lt;your_path&gt;/gcc-arm-embedded-4.9-2015q3/bin/", //Path to the bin folder of your GCC ARM Embedded installation
            "serverpath": "C:/&lt;your_path&gt;/SEGGER/JLink_V622g/JLinkGDBServerCL.exe", //Path to the SEGGER Debug Server (Installed with the nrf tools)
            //"svdFile": "C:/&lt;your_path&gt;/fruitymesh/sdk/sdk15/modules/nrfx/mdk/nrf52840.svd" // Path to the Device Description file for viewing Peripheral Registers (Optional)
        }
    ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can start debugging by clicking the play icon in the debug view as seen here:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/vscode_debug.png" alt="vscode debug"></span></p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
When using the debugger, make sure to use the proper "Utility" target first for flashing as this will guarantee that the SoftDevice is also flashed.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For more information on debugging, see <a href="https://wiki.segger.com/J-Link:Visual_Studio_Code">here</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_better_intellisense_support"><a class="anchor" href="#_better_intellisense_support"></a>Better Intellisense support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to get better Intellisense results (E.g. for conditional code compilation), it is important that Intellisense knows which build target is active. Sadly, there is an <a href="https://gitlab.kitware.com/cmake/cmake/issues/19462">open issue</a> with CMake. We have therefore provided a workaround:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open the previously created <code>&lt;fruitymesh&gt;/.vscode/settings.json</code> and add the <code>ONLY_FEATURESET</code> settings with the name of the featureset/target that you want to work on:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">&lt;fruitymesh&gt;/.vscode/settings.json</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-C++ hljs" data-lang="C++">"cmake.configureSettings":{
    "GCC_PATH":"C:/mway/tools/gcc-arm-embedded-4.9-2015q3",
    "BUILD_FEATURESETS":"ON",
    "ONLY_FEATURESET":"your_featureset_name"
},</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>In the Cmake Panel, click on "Configure All Projects". This will configure your project with a single target.</p>
</li>
<li>
<p>Select the active build target in the status bar of VsCode (at the bottom) to the same target that you specified in the settings.</p>
</li>
<li>
<p>Press Ctrl+Shift+P to open the Command Palette and search for <code>Developer: Reload Window</code> and activate it.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After the window was reloaded, Intellisense should have properly detected that the compile_commands.json file was regenerated by CMake and does now only contain the correct compile commands for this target.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_outline"><a class="anchor" href="#_outline"></a>Outline</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The outline is a very helpful view that we use a lot while developing FruityMesh. We have tried to structure and group our code nicely which will also help you to find stuff quickly. For the best experience, sort the outline view by position.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/vscode_outline.png" alt="outline"></span></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_nice_to_have_file_icons"><a class="anchor" href="#_nice_to_have_file_icons"></a>Nice to have: File Icons</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Press Ctrl + Shift + P to open the Command Palette and type "Icon" and choose "Preferences: File Icon Theme", then install the "VsCode Icons" theme to get some visually distinguishable icons in your project explorer.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Troubleshooting"><a class="anchor" href="#Troubleshooting"></a>Troubleshooting</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_cannot_create_folder_with_leading"><a class="anchor" href="#_cannot_create_folder_with_leading"></a>Cannot create folder with leading .</h3>
<div class="paragraph">
<p>Depending on the system you are running, it might not be possible to create a folder with a leading dot (.) in its name. You can open a commandline in that folder and use the "mkdir .yourfolder" command to create it. This is just a restriction of the file explorer that was removed in a later version.</p>
</div>
</div>
</div>
</div>
</article>
<aside class="article-aside hidden" role="navigation">
  <h3 class="toc-title">Visual Studio Code Setup</h3>
  <div id="article-toc"></div>
</aside>
  </main>
</div>
  <footer class="footer fruitymesh-footer-padding">
<p>This project is under active development at the <a href="http://www.mwaysolutions.com/" >M-Way Solutions GmbH,</a> Germany.</p>
<p>We use FruityMesh ourselves in conjunction with our custom MeshGateway to build services such as connected lights, asset tracking and much more for our customers.</p>
</footer>
<script type="text/javascript">
  window.antora = window.antora || {}
  window.antora.basePath = '..'
  window.antora.pagePath = '/fruitymesh/VsCodeSetup.html'
</script>
<script src="../_/js/site.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.6/lunr.min.js"></script>
<script src="../_/js/vendor/search.js"></script>
<script async src="../_/../search-index.js"></script>
<script src="../_/js/vendor/highlight.js"></script>
<script src="../_/js/vendor/zoom.js"></script>
<script>hljs.initHighlighting()</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.1.1/tocbot.min.js"></script>
<script>
  tocbot.init({
    tocSelector: '#article-toc',
    contentSelector: 'article',
    headingSelector: 'h2, h3, h4, h5, h6',
    collapseDepth: 6,
    positionFixedSelector: '#article-toc',
    scrollSmooth: true,
  });
  var tocList = document.getElementById('article-toc').getElementsByClassName('toc-list');
  if (tocList && tocList.length > 0 && tocList[0].childNodes.length > 0) {
    document.getElementById('article-toc').parentNode.classList.remove('hidden');
  }
</script>
</body>

</html>
